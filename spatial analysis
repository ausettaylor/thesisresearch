#single season occupancy analyses, need to separate by wet, dry, and late dry!!

#install necessary packages
install.packages('unmarked')

#load necessary packages
library(unmarked)

#set working directory to the folder with the metadata csv file
setwd("~/Desktop/thesis")

#read in the data 
#do the spatial analysis BY SPECIES starting with baboons
#select data for only focal species
data <- read.csv("thesis_data.csv")

#create datasets for wet season analysis 
#before wild dog introduction
baboon_wet_before <- data[data$season_year == "Wet 2017"
                          & data$Species == "Baboon",]
civet_wet_before <- data[data$season_year == "Wet 2017"
                          & data$Species == "Civet",]
genet_wet_before <- data[data$season_year == "Wet 2017"
                          & data$Species == "Genet",]
#after wild dog introduction
baboon_wet_after <- data[data$season_year == "Wet 2019"
                         & data$Species == "Baboon",]
civet_wet_after <- data[data$season_year == "Wet 2019"
                         & data$Species == "Civet",]
genet_wet_after <- data[data$season_year == "Wet 2019"
                         & data$Species == "Genet",]

#create datasets for early dry season analysis 
#before wild dog introduction
baboon_edry_before <- data[data$season_year == "Early Dry 2017"
                          & data$Species == "Baboon",]
civet_edry_before <- data[data$season_year == "Early Dry 2017"
                         & data$Species == "Civet",]
genet_edry_before <- data[data$season_year == "Early Dry 2017"
                         & data$Species == "Genet",]
#after wild dog introduction
baboon_edry_after <- data[data$season_year == "Early Dry 2019"
                         & data$Species == "Baboon",]
civet_edry_after <- data[data$season_year == "Early Dry 2019"
                        & data$Species == "Civet",]
genet_edry_after <- data[data$season_year == "Early Dry 2019"
                        & data$Species == "Genet",]

#create datasets for late dry season analysis 
#before wild dog introduction
baboon_ldry_before <- data[data$season_year == "Late Dry 2017"
                          & data$Species == "Baboon",]
civet_ldry_before <- data[data$season_year == "Late Dry 2017"
                         & data$Species == "Civet",]
genet_ldry_before <- data[data$season_year == "Late Dry 2017"
                         & data$Species == "Genet",]
#after wild dog introduction
baboon_ldry_after <- data[data$season_year == "Late Dry 2019"
                         & data$Species == "Baboon",]
civet_ldry_after <- data[data$season_year == "Late Dry 2019"
                        & data$Species == "Civet",]
genet_ldry_after <- data[data$season_year == "Late Dry 2019"
                        & data$Species == "Genet",]

#find the min/max date of the new dataframes!
#you have to do this for every data frame
min_date_bwb <- min(baboon_wet_before$DateTime)
max_date_bwb <- max(baboon_wet_before$DateTime)

#load in search effort 
searcheffort <- read.csv("SearchEffort.csv") 
se_baboon_wet_before <- searcheffort[searcheffort$date %in%
                                       seq(min_date_bwb, max_date_bwb, by="days"),]
######################################
camtrap <- unmarkedFrameOccu(y=data, obsCovs=covs.obs)
summary(camtrap)
#########################################

#baboon wet season after wild dog introduction
min_date_bwa <- min(baboon_wet_after$DateTime)
max_date_bwa <- max(baboon_wet_after$DateTime)

se_baboon_wet_after <- searcheffort[searcheffort$date %in%
                                      seq(min_date_ba, max_date_ba, by= "days"),]

#civet wet season analysis
#before wild dog introduction
min_date_cwb <- min(civet_wet_before$DateTime)
max_date_cwb <- max(civet_wet_before$DateTime)

se_civet_wet_before <- searcheffort[searcheffort$date %in%
                                      seq(min_date_cwb, max_date_cwb, by= "days"),]
#after wild dog introduction
min_date_cwa <- min(civet_wet_after$DateTime)
max_date_cwa <- max(civet_wet_after$DateTime)

se_civet_wet_after <- searcheffort[searcheffort$date %in%
                                     seq(min_date_cwa, max_date_cwa, by= "days"),]

#genet wet season analysis
#before wild dog introduction
min_date_gwb <- min(genet_wet_before$DateTime)
max_date_gwb <- max(genet_wet_before$DateTime)

se_genet_wet_before <- searcheffort[searcheffort$date %in%
                                      seq(min_date_gwb, max_date_gwb, by= "days"),]

#after wild dog introduction
min_date_gwa <- min(genet_wet_after$DateTime)
max_date_gwa <- max(genet_wet_after$DateTime)

se_genet_wet_after <- searcheffort[searcheffort$date %in%
                                     seq(min_date_gwa, max_date_gwa, by= "days"), ]

